
{% load static %}

<div id="gemstone-form">
    <!-- Display all form errors at the top -->
    {{ form.errors }}

    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}


        <div class="outer-content-container outer-content-small-border">
            <div class="inner-content-container x">

                <div class="{% if modal_view %}gemstone-form-text-container-lg-modal{% else %}gemstone-form-text-container-lg{% endif %}">
                    <span class="z mr-1"><i class="fas fa-tag icon-red j"></i>&nbsp;</span>
                    <span class="the-spanner">{{ form.name }}</span>
                </div>
                <div class="x">
                    <label for="{{ form.icon.id_for_label }}" class="gemstone-file-label">
                        {{ form.icon }}

                        {% if icon_url %}
                            <img id="upload-icon" src="{{ icon_url }}" alt="Image Preview" height="32" width="32" />
                        {% else %}
                            <i class="fas fa-camera fa-2x" id="upload-icon"></i>
                        {% endif %}
                    </label>
                </div>
            </div>
        </div>







        <div class="outer-content-container outer-content-small-border mb-4">
            <div class="inner-content-container">
                <div>
                    <label for="{{ form.value.id_for_label }}">
                        <i class="fas fa-coins icon-red">&nbsp;</i>
                    </label>
                    {{ form.value }}
                </div>

                <div>
                    <label for="{{ form.clarity.id_for_label }}" class="mb-1">
                        <i class="fas fa-eye icon-red">&nbsp;</i>
                    </label>
                    {{ form.clarity }}
                </div>

                <div class="{% if modal_view %}gemstone-form-text-container-modal{% else %}gemstone-form-text-container{% endif %}">
                    <label for="{{ form.color.id_for_label }}" class="mb-0">
                        <i class="fas fa-palette icon-red mr-1 pt-1">&nbsp;</i>
                    </label>
                    {{ form.color }}
                </div>

                <br>

                <div class="gemstone-form-textarea-container">
                    <span><i class="fas fa-info-circle icon-red mr-1"></i>&nbsp;</span>
                    {{ form.description }}
                </div>
            </div>
        </div>

        <div class="d-flex">
            {% if form.name.value %}

                <!-- Delete Button -->
{#                <button hx-post="{% url 'treasure:gemstone_delete' gemstone_id %}"#}
                <button type="button"
{#                        hx-trigger="click[countdown === 0]"#}
                        onclick="handleDelete()"
                        id="delete-button"
                        class="my-btn my-btn-primary my-btn-large mb-3 flex-fill my-btn-add-margin"
                >
                    <span><i class="fas fa-trash"></i> <span id="delete-button-text">Delete</span></span>
                </button>

{#                {% if not modal_view %}#}
{##}
{#                    <!-- Cancel Button -->#}
{#                    <button hx-get="{% url 'treasure:gemstone_view' gemstone_id %}"#}
{#                            hx-trigger="click"#}
{#                            hx-swap="outerHTML"#}
{#                            hx-target="#gemstone-form"#}
{#                            class="my-btn my-btn-primary my-btn-large mb-3 flex-fill my-btn-add-margin"#}
{#                    >#}
{#                        <span><i class="fas fa-broom"></i> Cancel</span>#}
{#                    </button>#}
{##}
{#                    {% endif %}#}

            {% else %}

                <!-- Clear Button -->
                <button hx-get="{% url 'treasure:gemstone_form' %}"
                        hx-trigger="click"
                        hx-swap="innerHTML"
                        hx-target="#gemstone-form"
                        class="my-btn my-btn-primary my-btn-large mb-3 flex-fill my-btn-add-margin"
                >
                    <span><i class="fas fa-broom"></i> Clear</span>
                </button>

            {% endif %}

            <!-- Save Button -->
            <button type="submit" class="my-btn my-btn-primary my-btn-large mb-3 flex-fill my-btn-add-margin">
                <span><i class="fas fa-save"></i> Save</span>
            </button>
        </div>
    </form>


    {% block extra_js %}
        <script src="{% static 'js/image-preview.js' %}"></script>
        <script src="{% static 'js/long-press-delete.js' %}"></script>
    {% endblock %}

</div>


